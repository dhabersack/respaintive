/*! respaintive 0.1.1 */
(function(){"use strict";var t,e,n,r,o,s,i,u,a,c,l,d,h,f,v,p,y,m,g,E,L,k,w,S,D,W,P,x,B,I,N,T,b,q,X,Y,z,A,C,J,R,j,F,G,H,K,M,O,Q,U,V,Z,$;for(t=function(){function t(){}return t.prototype.restore=function(){return d.lineWidth=this.lineWidth,d.strokeStyle=this.strokeStyle,!0},t.prototype.save=function(){return this.lineWidth=d.lineWidth,this.strokeStyle=d.strokeStyle,!0},t}(),n=function(){function t(){this.moves=[]}return t.prototype.clear=function(){return this.moves.length=0,!0},t.prototype.isEmpty=function(){return 0===this.moves.length},t.prototype.pop=function(){return this.moves.pop()},t.prototype.push=function(t){return this.moves.push(t)},t.prototype.size=function(){return this.moves.length},t}(),r=function(){function t(t,e){this.x=t,this.y=e}return t}(),e=function(){function t(t,e,n){this.startingPoint=t,this.lineWidth=e,this.strokeStyle=n,this.points=[]}return t.prototype.addPoint=function(t){return this.points.push(t)},t.prototype.draw=function(){var t,e,n,r;for(d.beginPath(),d.strokeStyle=this.strokeStyle,d.lineWidth=this.lineWidth,d.moveTo(this.startingPoint.x,this.startingPoint.y),r=this.points,e=0,n=r.length;n>e;e++)t=r[e],d.lineTo(t.x,t.y);return d.stroke(),d.closePath()},t}(),s=document.querySelector("body"),i=document.querySelector("canvas"),a=document.getElementById("settings-close"),l=document.querySelectorAll("#colors > li"),I=document.getElementById("settings-open"),N=document.getElementById("redo"),Y=document.getElementById("settings"),R=document.querySelectorAll("#tools > li"),j=document.getElementById("trash"),F=document.getElementById("undo"),G=document.getElementById("undo-all"),b=/(\d+)px/,m="#3e3e3e",v="round",p="round",y=1,d=i.getContext("2d"),h=new t,B=!1,f=null,T=new n,H=new n,W=function(t){var e,n,r;return n=s.style.right,e=b.test(n)?+b.exec(n)[1]:0,r=t.offsetX?t.offsetX:t.pageX-i.offsetLeft,t.touches?t.touches[0].screenX-i.offsetLeft+e:r+e},P=function(t){var e;return e=t.offsetY?t.offsetY:t.pageY-i.offsetTop,t.touches?t.touches[0].screenY-i.offsetTop:e},A=function(t){var n,o;return d.beginPath(),n=W(t),o=P(t),f=new e(new r(n,o),d.lineWidth,d.strokeStyle),d.moveTo(n,o),B=!0,t.preventDefault()},E=function(t){var e,n;return B&&(e=W(t),n=P(t),d.lineTo(e,n),d.stroke(),f.addPoint(new r(e,n))),t.preventDefault()},C=function(t){return d.closePath(),H.push(f),L(F),L(G),L(j),T.clear(),g(N),B=!1,t.preventDefault()},q=function(t){var e,n,r;for(d.strokeStyle=t.target.dataset.color,n=0,r=l.length;r>n;n++)e=l[n],e.className="";return t.target.className="active",t.preventDefault()},X=function(t){var e,n,r;for(d.lineWidth=t.target.dataset.linewidth,n=0,r=R.length;r>n;n++)e=R[n],e.className="";return t.target.className="active",t.preventDefault()},k=function(t){var e;return T.isEmpty()||(h.save(),e=T.pop(),e.draw(),H.push(e),L(F),L(G),T.isEmpty()&&g(N),h.restore()),t.preventDefault()},S=function(t){var e,n,r,o;for(u(),h.save(),T.push(H.pop()),o=H.moves,n=0,r=o.length;r>n;n++)e=o[n],e.draw();return H.isEmpty()&&(g(F),g(G)),L(N),h.restore(),t.preventDefault()},D=function(t){var e,n,r,o;for(o=H.moves,n=0,r=o.length;r>n;n++)e=o[n],S(t);return t.preventDefault()},L=function(t){return t.className="enabled",!0},g=function(t){return t.className="",!0},u=function(){return d.clearRect(0,0,i.width,i.height)},w=function(t){return u(),H.clear(),T.clear(),g(F),g(G),g(N),g(j),t.preventDefault()},o=function(){var t,e,n,r,o;for(i.width=""+(s.clientWidth-20),r=H.moves,o=[],e=0,n=r.length;n>e;e++)t=r[e],o.push(t.draw());return o},x=function(t){return s.style.right="0px",Y.style.display="none",t.preventDefault()},z=function(t){return s.style.right="280px",Y.style.display="block",t.preventDefault()},d.strokeStyle=m,d.lineCap=v,d.lineJoin=p,d.lineWidth=y,o(),i.addEventListener("mousedown",A,!1),i.addEventListener("touchstart",A,!1),i.addEventListener("mousemove",E,!1),i.addEventListener("touchmove",E,!1),i.addEventListener("mouseup",C,!1),i.addEventListener("touchend",C,!1),K=0,U=l.length;U>K;K++)c=l[K],c.addEventListener("click",q,!1);for(M=0,V=l.length;V>M;M++)c=l[M],c.addEventListener("touchstart",q,!1);for(O=0,Z=R.length;Z>O;O++)J=R[O],J.addEventListener("click",X,!1);for(Q=0,$=R.length;$>Q;Q++)J=R[Q],J.addEventListener("touchstart",X,!1);N.addEventListener("click",k,!1),N.addEventListener("touchstart",k,!1),j.addEventListener("click",w,!1),j.addEventListener("touchstart",w,!1),F.addEventListener("click",S,!1),F.addEventListener("touchstart",S,!1),G.addEventListener("click",D,!1),G.addEventListener("touchstart",D,!1),a.addEventListener("click",x,!1),a.addEventListener("touchstart",x,!1),I.addEventListener("click",z,!1),I.addEventListener("touchstart",z,!1),window.addEventListener("resize",o,!1)}).call(this);