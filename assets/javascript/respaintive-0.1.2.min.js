/*! respaintive 0.1.2 */
(function(){"use strict";var t,e,n,r,o,s,i,u,a,c,l,d,f,h,v,p,m,y,g,E,L,k,w,S,D,N,W,P,B,I,T,b,q,x,X,Y,z,A,C,J,R,j,F,G,H,K,M,O,Q,U,V,Z;for(t=function(){function t(){}return t.prototype.restore=function(){return d.lineWidth=this.lineWidth,d.strokeStyle=this.strokeStyle,!0},t.prototype.save=function(){return this.lineWidth=d.lineWidth,this.strokeStyle=d.strokeStyle,!0},t}(),n=function(){function t(){this.moves=[]}return t.prototype.clear=function(){return this.moves.length=0,!0},t.prototype.isEmpty=function(){return 0===this.moves.length},t.prototype.pop=function(){return this.moves.pop()},t.prototype.push=function(t){return this.moves.push(t)},t.prototype.size=function(){return this.moves.length},t}(),r=function(){function t(t,e){this.x=t,this.y=e}return t}(),e=function(){function t(t,e,n){this.startingPoint=t,this.lineWidth=e,this.strokeStyle=n,this.points=[]}return t.prototype.addPoint=function(t){return this.points.push(t)},t.prototype.draw=function(){var t,e,n,r;for(d.beginPath(),d.strokeStyle=this.strokeStyle,d.lineWidth=this.lineWidth,d.moveTo(this.startingPoint.x,this.startingPoint.y),r=this.points,e=0,n=r.length;n>e;e++)t=r[e],d.lineTo(t.x,t.y);return d.stroke(),d.closePath()},t}(),s=document.querySelector("body"),i=document.querySelector("canvas"),a=document.getElementById("settings-close"),l=document.querySelectorAll("#colors > li"),I=document.getElementById("settings-open"),T=document.getElementById("redo"),X=document.getElementById("settings"),J=document.querySelectorAll("#tools > li"),R=document.getElementById("trash"),j=document.getElementById("undo"),F=document.getElementById("undo-all"),y="#3e3e3e",v="round",p="round",m=1,d=i.getContext("2d"),f=new t,B=!1,h=null,b=new n,G=new n,N=function(t){var e,n;return e="offset"===s.className?280:0,n=t.offsetX?t.offsetX:t.pageX-i.offsetLeft+e,t.touches?t.touches[0].screenX-i.offsetLeft+e:n},W=function(t){var e;return e=t.offsetY?t.offsetY:t.pageY-i.offsetTop,t.touches?t.touches[0].screenY-i.offsetTop:e},z=function(t){var n,o;return d.beginPath(),n=N(t),o=W(t),h=new e(new r(n,o),d.lineWidth,d.strokeStyle),d.moveTo(n,o),B=!0,t.preventDefault()},E=function(t){var e,n;return B&&(e=N(t),n=W(t),d.lineTo(e,n),d.stroke(),h.addPoint(new r(e,n))),t.preventDefault()},A=function(t){return d.closePath(),G.push(h),L(j),L(F),L(R),b.clear(),g(T),B=!1,t.preventDefault()},q=function(t){var e,n,r;for(d.strokeStyle=t.target.dataset.color,n=0,r=l.length;r>n;n++)e=l[n],e.className="";return t.target.className="active",t.preventDefault()},x=function(t){var e,n,r;for(d.lineWidth=t.target.dataset.linewidth,n=0,r=J.length;r>n;n++)e=J[n],e.className="";return t.target.className="active",t.preventDefault()},k=function(t){var e;return b.isEmpty()||(f.save(),e=b.pop(),e.draw(),G.push(e),L(j),L(F),b.isEmpty()&&g(T),f.restore()),t.preventDefault()},S=function(t){var e,n,r,o;for(u(),f.save(),b.push(G.pop()),o=G.moves,n=0,r=o.length;r>n;n++)e=o[n],e.draw();return G.isEmpty()&&(g(j),g(F)),L(T),f.restore(),t.preventDefault()},D=function(t){var e,n,r,o;for(o=G.moves,n=0,r=o.length;r>n;n++)e=o[n],S(t);return t.preventDefault()},L=function(t){return t.className="enabled",!0},g=function(t){return t.className="",!0},u=function(){return d.clearRect(0,0,i.width,i.height)},w=function(t){return u(),G.clear(),b.clear(),g(j),g(F),g(T),g(R),t.preventDefault()},o=function(){var t,e,n,r,o;for(i.width=""+(s.clientWidth-20),r=G.moves,o=[],e=0,n=r.length;n>e;e++)t=r[e],o.push(t.draw());return o},P=function(t){return s.className="",X.className="",t.preventDefault()},Y=function(t){return s.className="offset",X.className="offset",t.preventDefault()},d.strokeStyle=y,d.lineCap=v,d.lineJoin=p,d.lineWidth=m,o(),i.addEventListener("mousedown",z,!1),i.addEventListener("touchstart",z,!1),i.addEventListener("mousemove",E,!1),i.addEventListener("touchmove",E,!1),i.addEventListener("mouseup",A,!1),i.addEventListener("touchend",A,!1),H=0,Q=l.length;Q>H;H++)c=l[H],c.addEventListener("click",q,!1);for(K=0,U=l.length;U>K;K++)c=l[K],c.addEventListener("touchstart",q,!1);for(M=0,V=J.length;V>M;M++)C=J[M],C.addEventListener("click",x,!1);for(O=0,Z=J.length;Z>O;O++)C=J[O],C.addEventListener("touchstart",x,!1);T.addEventListener("click",k,!1),T.addEventListener("touchstart",k,!1),R.addEventListener("click",w,!1),R.addEventListener("touchstart",w,!1),j.addEventListener("click",S,!1),j.addEventListener("touchstart",S,!1),F.addEventListener("click",D,!1),F.addEventListener("touchstart",D,!1),a.addEventListener("click",P,!1),a.addEventListener("touchstart",P,!1),I.addEventListener("click",Y,!1),I.addEventListener("touchstart",Y,!1),window.addEventListener("resize",o,!1)}).call(this);