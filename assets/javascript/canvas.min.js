/*! canvas 0.1.0 */
(function(){var t,e,n,r,o,i,s,u,a,c,l,d,h,f,v,p,m,y,g,E,L,k,w,S,W,D,P,B,I,x,N,T,b,q,X,Y,z,A,C,J,R,j,F,G,H,K,M,O,Q,U,V,Z;for(t=function(){function t(){}return t.prototype.restore=function(){return d.lineWidth=this.lineWidth,d.strokeStyle=this.strokeStyle},t.prototype.save=function(){return this.lineWidth=d.lineWidth,this.strokeStyle=d.strokeStyle},t}(),n=function(){function t(){this.moves=[]}return t.prototype.clear=function(){return this.moves.length=0},t.prototype.isEmpty=function(){return 0===this.moves.length},t.prototype.pop=function(){return this.moves.pop()},t.prototype.push=function(t){return this.moves.push(t)},t.prototype.size=function(){return this.moves.length},t}(),r=function(){function t(t,e){this.x=t,this.y=e}return t}(),e=function(){function t(t,e,n){this.startingPoint=t,this.lineWidth=e,this.strokeStyle=n,this.points=[]}return t.prototype.addPoint=function(t){return this.points.push(t)},t.prototype.draw=function(){var t,e,n,r;for(d.beginPath(),d.strokeStyle=this.strokeStyle,d.lineWidth=this.lineWidth,d.moveTo(this.startingPoint.x,this.startingPoint.y),r=this.points,e=0,n=r.length;n>e;e++)t=r[e],d.lineTo(t.x,t.y);return d.stroke(),d.closePath()},t}(),i=document.querySelector("body"),s=document.querySelector("canvas"),a=document.getElementById("settings-close"),l=document.querySelectorAll("#colors > li"),x=document.getElementById("settings-open"),N=document.getElementById("redo"),X=document.getElementById("settings"),J=document.querySelectorAll("#tools > li"),R=document.getElementById("trash"),j=document.getElementById("undo"),F=document.getElementById("undo-all"),y="#3e3e3e",v="round",p="round",m=1,d=s.getContext("2d"),h=new t,I=!1,f=null,T=new n,G=new n,D=function(t){var e;return console.log(t),e=t.offsetX?t.offsetX:t.pageX-s.offsetLeft,t.touches?t.touches[0].screenX-s.offsetLeft:e},P=function(t){var e;return e=t.offsetY?t.offsetY:t.pageY-s.offsetTop,t.touches?t.touches[0].screenY-s.offsetTop:e},z=function(t){var n,o;return d.beginPath(),n=D(t),o=P(t),f=new e(new r(n,o),d.lineWidth,d.strokeStyle),d.moveTo(n,o),I=!0},E=function(t){var e,n;return I&&(e=D(t),n=P(t),d.lineTo(e,n),d.stroke(),f.addPoint(new r(e,n))),t.preventDefault()},A=function(t){return d.closePath(),G.push(f),L(j),L(F),L(R),T.clear(),g(N),I=!1,t.preventDefault()},b=function(t){var e,n,r;for(d.strokeStyle=t.target.dataset.color,n=0,r=l.length;r>n;n++)e=l[n],e.className="";return t.target.className="active",t.preventDefault()},q=function(t){var e,n,r;for(d.lineWidth=t.target.dataset.linewidth,n=0,r=J.length;r>n;n++)e=J[n],e.className="";return t.target.className="active",t.preventDefault()},k=function(t){var e;return T.isEmpty()||(h.save(),e=T.pop(),e.draw(),G.push(e),L(j),L(F),T.isEmpty()&&g(N),h.restore()),t.preventDefault()},S=function(t){var e,n,r,o;for(u(),h.save(),T.push(G.pop()),o=G.moves,n=0,r=o.length;r>n;n++)e=o[n],e.draw();return G.isEmpty()&&(g(j),g(F)),L(N),h.restore(),t.preventDefault()},W=function(t){var e,n,r,o;for(o=G.moves,n=0,r=o.length;r>n;n++)e=o[n],S(t);return t.preventDefault()},L=function(t){return t.className="enabled"},g=function(t){return t.className=""},u=function(){return d.clearRect(0,0,s.width,s.height)},w=function(t){return u(),G.clear(),T.clear(),g(j),g(F),g(N),g(R),t.preventDefault()},o=function(){var t,e,n,r,o;for(s.width=""+(i.clientWidth-20),r=G.moves,o=[],e=0,n=r.length;n>e;e++)t=r[e],o.push(t.draw());return o},B=function(t){return i.style.right="0px",X.style.display="none",t.preventDefault()},Y=function(t){return i.style.right="280px",X.style.display="block",t.preventDefault()},d.strokeStyle=y,d.lineCap=v,d.lineJoin=p,d.lineWidth=m,o(),s.addEventListener("mousedown",z,!1),s.addEventListener("touchstart",z,!1),s.addEventListener("mousemove",E,!1),s.addEventListener("touchmove",E,!1),s.addEventListener("mouseup",A,!1),s.addEventListener("touchend",A,!1),H=0,Q=l.length;Q>H;H++)c=l[H],c.addEventListener("click",b,!1);for(K=0,U=l.length;U>K;K++)c=l[K],c.addEventListener("touchstart",b,!1);for(M=0,V=J.length;V>M;M++)C=J[M],C.addEventListener("click",q,!1);for(O=0,Z=J.length;Z>O;O++)C=J[O],C.addEventListener("touchstart",q,!1);N.addEventListener("click",k,!1),N.addEventListener("touchstart",k,!1),R.addEventListener("click",w,!1),R.addEventListener("touchstart",w,!1),j.addEventListener("click",S,!1),j.addEventListener("touchstart",S,!1),F.addEventListener("click",W,!1),F.addEventListener("touchstart",W,!1),a.addEventListener("click",B,!1),a.addEventListener("touchstart",B,!1),x.addEventListener("click",Y,!1),x.addEventListener("touchstart",Y,!1),window.addEventListener("resize",o,!1)}).call(this);